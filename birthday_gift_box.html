<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Birthday Gift Box â€” Interactive Animation</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#ff6b81;--accent2:#ffd166;}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071226 0%, #0f1724 60%);font-family:Inter, system-ui, Arial, sans-serif;color:#fff}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:40px}

    .stage{width:900px;max-width:95vw;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:18px;padding:30px;box-shadow:0 10px 40px rgba(2,6,23,0.6);position:relative}

    .scene{display:flex;gap:24px;align-items:center;justify-content:center;flex-direction:column}

    /* Gift box */
    .gift-wrap{width:220px;height:180px;cursor:pointer;position:relative;perspective:800px}
    .box-base{width:100%;height:70%;background:linear-gradient(180deg,#b22286,#8b145e);border-radius:8px 8px 12px 12px;position:absolute;bottom:0;left:0;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 20px rgba(0,0,0,0.45)}
    .ribbon{position:absolute;left:50%;top:30%;transform:translateX(-50%);width:20px;height:120px;background:#fff2;border-radius:4px}
    .ribbon-top{position:absolute;left:50%;top:12px;transform:translateX(-50%);width:160px;height:40px;background:linear-gradient(90deg,#ffd166,#ff6b81);border-radius:8px}
    .box-lid{width:104%;height:56px;background:linear-gradient(180deg,#ff7fa0,#cc4772);position:absolute;left:-2%;top:-12px;border-radius:10px;transform-origin:50% 90%;transition:transform 700ms cubic-bezier(.2,.9,.2,1);box-shadow:0 8px 30px rgba(0,0,0,0.5)}
    .gift-wrap.open .box-lid{transform:rotateX(70deg) translateY(-28px)}

    /* Scene canvas */
    .card-stage{width:560px;height:320px;border-radius:12px;background:linear-gradient(180deg,#071229,#07102a);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}

    svg.person{width:320px;height:220px}

    .controls{display:flex;gap:12px;margin-top:18px}
    .btn{background:var(--accent);border:none;color:white;padding:10px 16px;border-radius:10px;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,0.35)}
    .btn.ghost{background:transparent;border:2px solid rgba(255,255,255,0.08)}

    /* Message overlay */
    .message{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.8));backdrop-filter: blur(4px);opacity:0;pointer-events:none;transition:opacity 400ms ease}
    .message.show{opacity:1;pointer-events:auto}
    .message-card{background:linear-gradient(90deg,#ff6b81,#ffd166);padding:28px;border-radius:14px;color:#081024;box-shadow:0 20px 50px rgba(2,6,23,0.6);text-align:center;max-width:80%}
    .message-card h1{margin:0;font-size:28px}
    .message-card p{margin:8px 0 0}

    /* small helpers */
    .hidden{display:none}

    /* animation keyframes */
    @keyframes head-lean {0%{transform:translateX(0);}50%{transform:translateX(28px);}100%{transform:translateX(24px)}}
    @keyframes head-jerk {0%{transform:translateX(0);}30%{transform:translateX(-18px);}100%{transform:translateX(0)}}
    @keyframes hand-slap {0%{transform:rotate(0);}40%{transform:rotate(-75deg);}100%{transform:rotate(-20deg)}}
    @keyframes heart-pop {0%{transform:scale(0);}60%{transform:scale(1.12);}100%{transform:scale(1)}}

    /* responsive */
    @media (max-width:720px){.stage{padding:16px}.scene{gap:12px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="stage">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:20px;flex-wrap:wrap">
        <div class="gift-wrap" id="gift">
          <div class="box-lid" id="lid"></div>
          <div class="ribbon-top"></div>
          <div class="ribbon"></div>
          <div class="box-base"></div>
        </div>

        <div class="card-stage" id="stage">
          <!-- default: hidden until box opened -->
          <div id="animationContainer" style="display:flex;flex-direction:column;align-items:center;gap:8px">
            <!-- SVG scene (simple characters) -->
            <svg class="person" viewBox="0 0 320 220" xmlns="http://www.w3.org/2000/svg">
              <!-- ground -->
              <rect x="0" y="200" width="320" height="20" fill="rgba(255,255,255,0.02)" />

              <!-- man group -->
              <g id="man" transform="translate(40,40)">
                <!-- body -->
                <ellipse cx="40" cy="120" rx="30" ry="36" fill="#2b6cb0" />
                <!-- head -->
                <g id="manHead" transform="translate(40,48)">
                  <circle cx="0" cy="0" r="18" fill="#ffd9c7" />
                  <circle cx="-6" cy="-2" r="3" fill="#2b2b2b" />
                  <circle cx="6" cy="-2" r="3" fill="#2b2b2b" />
                </g>
              </g>

              <!-- girl group -->
              <g id="girl" transform="translate(170,40)">
                <!-- body -->
                <ellipse cx="40" cy="120" rx="28" ry="36" fill="#ff92b2" />
                <!-- head -->
                <g id="girlHead" transform="translate(40,48)">
                  <circle cx="0" cy="0" r="18" fill="#ffe1d4" />
                  <circle cx="-6" cy="-2" r="3" fill="#2b2b2b" />
                  <circle cx="6" cy="-2" r="3" fill="#2b2b2b" />
                </g>

                <!-- tulip (initially hidden) -->
                <g id="tulip" transform="translate(10,70) scale(0.8)">
                  <rect x="6" y="18" width="4" height="28" rx="2" fill="#3a6b35" />
                  <path d="M8 18 C4 12, 14 8, 16 18 C14 14, 8 14, 8 18 Z" fill="#ff6b81" />
                </g>

                <!-- girl hand (for slap) -->
                <g id="girlHand" transform="translate(25,80)">
                  <rect x="0" y="0" width="22" height="8" rx="4" fill="#ffe1d4" transform-origin="0 4" />
                </g>
              </g>

              <!-- heart for kiss -->
              <g id="heart" transform="translate(150,80) scale(0)" style="transform-origin:150px 80px">
                <path d="M0 -6 C0 -16 20 -16 20 -6 C20 2 0 12 0 18 C0 12 -20 2 -20 -6 C-20 -16 0 -16 0 -6 Z" fill="#ff6b81" />
              </g>
            </svg>

            <div class="controls hidden" id="controls">
              <button class="btn" id="yesBtn">Yes â€” Kiss</button>
              <button class="btn ghost" id="noBtn">No â€” Slap</button>
            </div>
          </div>

          <div class="message" id="message">
            <div class="message-card" id="messageCard">
              <h1 id="msgTitle">Happy Birthday!</h1>
              <p id="msgSub">Wishing you a day filled with love, laughter and tulips ðŸŒ·</p>
              <div style="margin-top:14px;display:flex;gap:10px;justify-content:center">
                <button class="btn" id="again">Play Again</button>
                <a class="btn ghost" id="downloadLink" href="#" download="birthday-gift-box.html">Download</a>
              </div>
            </div>
          </div>

        </div>
      </div>

      <p style="margin-top:14px;opacity:0.8;font-size:13px">Tip: click the gift box to open it. Then choose Yes or No.</p>
    </div>
  </div>

  <script>
    const gift = document.getElementById('gift');
    const animationContainer = document.getElementById('animationContainer');
    const controls = document.getElementById('controls');
    const message = document.getElementById('message');
    const msgTitle = document.getElementById('msgTitle');
    const msgSub = document.getElementById('msgSub');
    const again = document.getElementById('again');
    const downloadLink = document.getElementById('downloadLink');

    const lid = document.getElementById('lid');
    const manHead = document.getElementById('manHead');
    const girlHead = document.getElementById('girlHead');
    const girlHand = document.getElementById('girlHand');
    const heart = document.getElementById('heart');
    const tulip = document.getElementById('tulip');

    // Create a downloadable blob link for this file content so user can download directly
    const fileContent = `<!doctype html>\n${document.documentElement.outerHTML.replace(/`/g,'')}`;
    const blob = new Blob([fileContent], {type: 'text/html'});
    downloadLink.href = URL.createObjectURL(blob);

    // Open the gift box
    gift.addEventListener('click', ()=>{
      if (gift.classList.contains('open')) return;
      gift.classList.add('open');
      // reveal animation scene
      animationContainer.style.opacity = 0;
      setTimeout(()=>{
        animationContainer.style.opacity = 1;
        controls.classList.remove('hidden');
        // show tulip with entrance
        tulip.setAttribute('transform','translate(10,70) scale(1)');
      },350);
    });

    // KISS ACTION
    document.getElementById('yesBtn').addEventListener('click', ()=>{
      controls.classList.add('hidden');
      // lean heads to each other
      girlHead.style.transition = 'transform 700ms cubic-bezier(.2,.9,.2,1)';
      manHead.style.transition = 'transform 700ms cubic-bezier(.2,.9,.2,1)';
      girlHead.style.transform = 'translateX(-24px)';
      manHead.style.transform = 'translateX(12px)';

      // show heart pop
      setTimeout(()=>{
        heart.style.transition = 'transform 400ms cubic-bezier(.2,.9,.2,1), opacity 300ms';
        heart.style.transform = 'translate(0,0) scale(1)';
      },480);

      // After short delay, show message
      setTimeout(()=>{
        msgTitle.textContent = 'Happy Birthday, Lovely!';
        msgSub.textContent = 'Sealed with a kiss ðŸ’‹ â€” may your day be as sweet as you are.';
        message.classList.add('show');
      },1400);
    });

    // SLAP ACTION
    document.getElementById('noBtn').addEventListener('click', ()=>{
      controls.classList.add('hidden');
      // animate hand slap
      girlHand.style.transition = 'transform 300ms ease';
      girlHand.style.transformOrigin = '0 4px';
      girlHand.style.transform = 'rotate(-80deg) translateX(-10px)';
      // man's head jerk
      manHead.style.transition = 'transform 400ms cubic-bezier(.2,.9,.2,1)';
      setTimeout(()=>{ manHead.style.transform = 'translateX(-28px)'; },120);

      // show message after slap
      setTimeout(()=>{
        msgTitle.textContent = 'Happy Birthday! (and Ouch ðŸ˜…)';
        msgSub.textContent = 'A playful slap â€” may your year be full of surprises and laughter!';
        message.classList.add('show');
      },900);
    });

    again.addEventListener('click', ()=>{
      // reset scene
      message.classList.remove('show');
      gift.classList.remove('open');
      controls.classList.add('hidden');
      manHead.style.transform='translateX(0)';
      girlHead.style.transform='translateX(0)';
      girlHand.style.transform='rotate(0)';
      heart.style.transform='scale(0)';
      tulip.setAttribute('transform','translate(10,70) scale(0.8)');
    });

    // small enter animation for message card
    message.addEventListener('transitionend', (e)=>{
      // noop
    });

    // prevent pointer events while closed
    animationContainer.style.transition = 'opacity 500ms';
    animationContainer.style.opacity = 0;
  </script>
</body>
</html>
